
\section{System Budgets}
This section detail the power and mass budgets of SnapSat. (overview/description)


\subsection{Mass Budget} 
The mass budget is shown in table~\ref{tab:massbudget}, it is ensured that \textit{SnapSat} meets the requirement of a maximum weight of 1kg. The component masses were used to determine the center of gravity for the satellite, it is desirable to keep this located close to the geometric centre as the attitude control system (magneto-torquers) are placed on the outermost surfaces.Centroid averaging across all three axes was used to calculate this as follows
\[
x_{cg} = \cfrac{\Sigma x_i\cdot m_i}{\Sigma m_i} \qquad y_{cg} = \cfrac{\Sigma y_i\cdot m_i}{\Sigma m_i} \qquad z_{cg} = \cfrac{\Sigma z_i\cdot m_i}{\Sigma m_i}
\]
\noindent
The moment of inertia about all three axes is given by
\[ I = \int r^2\,\,dm \]
\noindent
The inertial of each individual component was ignored, assuming these were roughly symmetrical. Only the relative locations of the component contributed to the total inertia. Thus, the inertias were given
\begin{eqnarray} 
I_{xx} &=& \cfrac{1}{\Sigma m_i}\,\cdot\,\left( \Sigma \sqrt{(y_i-y_{cg})^2+(z_i-z_{cg})^2}\,\cdot\,m_i \right) \\
I_{yy} &=& \cfrac{1}{\Sigma m_i}\,\cdot\,\left( \Sigma \sqrt{(x_i-x_{cg})^2+(z_i-z_{cg})^2}\,\cdot\,m_i \right) \\
I_{zz} &=& \cfrac{1}{\Sigma m_i}\,\cdot\,\left( \Sigma \sqrt{(x_i-x_{cg})^2+(y_i-y_{cg})^2}\,\cdot\,m_i \right) 
\end{eqnarray} 
\noindent
and so on; where $x_i$, $y_i$ and $z_i$ are the positions of each component and $m_i$ is the mass of each component. The inertial matrix was computed using \textit{Solidworks}. It was found to be:
\begin{equation}
    I = \bmat{0.4cm}{I_{xx} * I_{xy} * I_{xz} @
                 I_{yx} * I_{yy} * I_{yz} @
                 I_{zx} * I_{zy} * I_{zz}} = 
    \bmat{0.4cm}{886508.05 * 287196.55 * 245002.46 @
                 287196.55 * 77032823 * 292616.34 @
                 245002.46 * 292616.34 * 880334.84}\text{ g$\cdot$ mm}^2
\end{equation}
\noindent
{\it note: would be better after we put the components in}

%\begin{landscape}
\begin{table}[H]
    \centering
    \caption{SnapSat Mass Budget (target mass of 1000 g)}
    \vspace{0.15cm}
    \label{tab:massbudget}
    {\renewcommand{\arraystretch}{1.2}%
    \begin{tabular}{|>{\arraybackslash}m{3.5cm}||>{\arraybackslash}m{2.3cm}|>{\arraybackslash}m{2.3cm}|>{\arraybackslash}m{2.3cm}|>{\arraybackslash}m{2.3cm}|}
            \hline
            {\bf Subsystem} & {\bf Mass} & {\bf Contingency} & {\bf Mass $+$ Contingency} & {\bf Fraction of Total Mass} \\ \hline\hline
            {\it Structural} \newline - chassis \newline - solar panels 
            & {\quad}\newline100g\newline $9\times25$g & {\quad}\newline30g\newline $9\times5$g & 415g & 47.6\% \\ \hline
            {\it ADCS} \newline - air core coils \newline - sun sensors \newline - IMU
            & {\quad}\newline$3\times50$g\newline $6\times1.8$g\newline 2.8g & {\quad}\newline$3\times5$g\newline $6\times0.3$g\newline0.4g & 180.2g & 22\% \\ \hline
            {\it EPS} \newline - batteries \newline - power bus
            &  {\quad}\newline 103g \newline 10g &  {\quad}\newline 7g \newline 2g & 122g & 14.9\% \\ \hline
            {\it OBS / OBDH} \newline - Arduino board \newline - memory storage \newline - PCBs
            & {\quad}\newline25g\newline1g\newline 4x10g & {\quad}\newline5g\newline 0.2g\newline2g & 79.2g & 9.1\% \\ \hline
            {\it TT\&C} \newline - antennae \newline - transceiver 
            &  {\quad}\newline 3g \newline 75g & {\quad}\newline 1g \newline 5g & 84g & 10.3\% \\ \hline
            {\it Thermal} \newline - tapings \newline - MLI
            & {\quad}\newline 1g\newline 3g & {\quad}\newline 0.3g\newline 0.5g & 4.8g & 0.6\% \\ \hline
            {\it Payload} \newline - camera
            & {\quad}\newline25g & {\quad}\newline5g & 25g & 3.1\% \\ \hline
            {\it Integration} \newline - bolts/rivets \newline - cabling/wires
            & {\quad}\newline 5g\newline2g & {\quad}\newline2g\newline0.5g & 9.5g &  1.2\%\\ \hline\hline
            {\bf Total} &  &  & 865.7g & \\ \hline
            {\bf Mass Margin} &  &  & 134.3g & 15.5\% \\ \hline
    \end{tabular} } 
\end{table} \vspace{0.3cm}
%\end{figure} 
%\end{landscape}


\subsection{Power Budget}

The power to the SnapSat will be supplied by 9 solar panels arranged around the cube as shown in Figure~\ref{fig:flower}.

The solar panels used are advertised at ouputting 1W.  In space, light intensity is approximately 144\% that on earth since there is no attenuation due to absorption so we can conclude that solar panel output would increase accordingly.
Since we assume the satellite will spend 65\% of it's time in the sun $OAP = 0.65\cdot P\cdot1.44$ \\
NIKITA CALCULATIONS HERE \\
This gives an OAP of approximately 2.1 W, however the peak input power from the solar panels is 7.2 W (if incident light occurs from above) which the batteries are capable of charging.

\vspace{-0.3cm}
\begin{table}[H]
    \centering
    \caption{SnapSat Power Budget}
    \vspace{0.15cm}
%    \label{tab:designoverview}
    {\renewcommand{\arraystretch}{1.4}%
        \begin{tabular}{|>{\arraybackslash}m{2cm}||>{\arraybackslash}m{2cm}|>{\arraybackslash}m{2cm}|>{\arraybackslash}m{1.4cm}|>{\arraybackslash}m{1.4cm}|>{\arraybackslash}m{1.4cm}|>{\arraybackslash}m{1.4cm}|>{\arraybackslash}m{1.4cm}|}
           \hline
           \multicolumn{3}{|l|}{} & \multicolumn{5}{l|}{{\bf Average Duty Cycle by Mode (\%)}} \\ \hline
           {\bf Load} & {\bf Power Consumption (W)} & {\bf Number of Units On} & {\it Standby Mode} & {\it Detumble Mode} & {\it Payload Operations Mode} & {\it Transmissions Mode} & {\it Power Critical Mode} \\ \hline\hline
           OBC & 55mW & 1 & 25 \% & 100\%  & 100\% & 100\% & 10\% \\ \hline
           VHF Rx & 5mW & 1 & 100\% & 100\% & 100\% & 100\% & 0\% \\ \hline
           S-band Tx & 500mW & 1 & 0\% & 5\% & 5\% & 100\% & 0\% \\ \hline
           Magnotorquers & 150mW & 1 & 10 \% & 100\%  & 0\% & 0\% &  0\%\\ \hline
           Power Board & 350mW & 1 & 100 \% & 100 \% & 100 \% & 100 \% & 100 \% \\ \hline
           Camera & 1950mW & 1 & 0\% & 0\% & 100 \% & 0\% & 0\% \\ \hline
           IMU & 30mW  & 1 & 25\% & 100 \% & 25\% & 25\% & 0\% \\ \hline
           GPS & 100mW & 1 & 25\% & 0\% & 0\% & 0\% & 0\% \\ \hline
           &  &  &  &  &  &  &  \\ \hline\hline
           \multicolumn{3}{|l|}{{\bf Sum Loads (mW)}} & 416.25 & 690 & 2467.5 & 568.5 & 355.8 \\ \hline
           \multicolumn{3}{|l|}{{\bf Efficiency}} & 0.8 & 0.8 & 0.8 & 0.8 & 0.8 \\ \hline
           \multicolumn{3}{|l|}{{\bf Power Consumed (mW)}} & 520.3 & 862.5 & 3084.4 & 710.6 & 444.37 \\ \hline
           \multicolumn{3}{|l|}{{\bf Power Generated (mW)}} & 2100 & 2100 & 2100 & 2100 & 2100 \\ \hline
           \multicolumn{3}{|l|}{{\bf Power Margin}} & 1579.7 & 1237.5 & -984.4 & 1389.4 & 1655.6 \\ \hline
        \end{tabular} } 
    \end{table} \vspace{0.3cm}
    
    \noindent
    This power budget is provisional and dependent on the orbital height of the SnapSat as this will greatly increase the power consumption of the S-band Tx unit. \\
    Further testing will be required to determine the exact distance the 500mW of power will propagate the signal.

\subsection{Pointing Budget}

Since this spacecraft is performing Earth observation, it requires a pointing budget. This refers to the ability to orient the spacecraft towards a target having a specific geographical orientation. Along with the pointing accuracy, the satellite needs to be able to map the location from its own location. Errors in both pointing and mapping accuracies will be discussed here. \\
\\\noindent
The attitude control system for SnapSat will consist of three air core magnetorquers operating on 3 separate planes capable of producing 0.05Am$^2$ each.  Only two of the magnetorquers can work at any one time, which will reduce total power usage for the system.  The first component of the determination system is a 9-DOF IMU which will primarily be used in the de-tumble phase due to accumulated error issues with this equipment which are expected to occur later in the mission.  The second component is a solar tracker system consisting of six photodiode pins, one on each face, which will be used to accurately determine the attitude of the satellite based on the location of the Sun. \\
\\\noindent
According to the specification data, the IMU will experience a 2\% error based on the expected temperature range, although this will increase over the course of the mission due to the accumulated error.  Although the exact error will need to be calculated during calibration and testing, based on current literature there are a number of similar solar tracking systems which are able to achieve an accuracy of 0.2\% \cite{beaudette}.  However given the low budget and subsequently slightly inferior equipment conservative estimate of 0.5\% will be used for the solar tracker error.  In regards to the magnetorquers expected error based on similar models 1\%, although error will be finalised during the calibration and testing phase.
\subsubsection{Error Calculation}
Due to the fact that the two attitude determination systems will almost always be used separately we have calculated three different total errors. The total errors were calculated using the following formula:
\begin{eqnarray}
\text{System Error} &=& \sqrt{(\text{IMU error})^2+(\text{sun sensor error})^2+(\text{magnetorquers error})^2} \\
&=& \sqrt{(2\%)^2+(0.5\%)^2+(1\%)^2} \\
&=& 2.3\% \\
&=& 8.3\deg
\end{eqnarray}
This is summarised in the table below

\begin{table}[H]
    \centering
    \caption{Pointing budget error calculation breakdown}
    \vspace{0.1cm}
    {\renewcommand{\arraystretch}{1.4}%
        \begin{tabular}{|>{\centering\arraybackslash}m{2.3cm}|>{\centering\arraybackslash}m{2.3cm}|>{\centering\arraybackslash}m{2.3cm}|>{\centering\arraybackslash}m{2.5cm}|>{\centering\arraybackslash}m{2cm}|>{\centering\arraybackslash}m{2cm}|}
            \hline
            & {\bf IMU Error (\%)} & {\bf Sun Tracker Error (\%)} & {\bf Magnetorquer Error (\%)} & {\bf Total (\%)} & {\bf Total (\deg)} \\ \hline\hline
            Overall System & 2.0 & 0.5 & 1.0 & 2.3 & 8.3 \\ \hline
            System 1 & 2.0 & - & 1.0 & 2.2 & 7.9 \\ \hline
            System 2 & - & 1.0 & 1.0 & 1.1 & 4.0 \\ \hline
        \end{tabular} } 
    \end{table}

\noindent
The majority of the mission is expected to be spent using system 2 (utilising the sun trackers), which produces an error of 4\deg.  Whilst this is within the range for the widest application of the three mapping scenarios (see Appendix~\ref{app:mapping}) it is slightly outside of the range of the second more focused scenario.  However, it should be noted that these are conservative calculations and the finalised error may be lower than these figures. 


 


\subsection{Link Budgets}
Calculations for both link budgets (list assumptions here).

\subsubsection{Uplink Budget}
The uplink budget allows for XXX. The specifications are
\begin{itemize}
    \item Antenna type at satellite: (omni, directional$+$gain)
    \item Frequency Band: (VHF (145.800MHz) , UHF (435.xxx MHz), SHF etc.)
    \item Objective C/N:
    \item Bit rate and modulation type:
    \item Expected occupied bandwidth:
\end{itemize}

\subsubsection{Downlink Budget}
The downlink budget allows for XXX. The specifications are
\begin{itemize}
    \item Antenna type at satellite: (omni, directional$+$gain)
    \item Frequency Band: (VHF (145.800MHz) , UHF (435.xxx MHz), SHF etc.)
    \item Objective C/N:
    \item Bit rate and modulation type:
    \item Expected occupied bandwidth:
\end{itemize}

\subsection{Data Budget}
Data budget CALCULATIONS.


